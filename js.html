<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>遵义旅游售票网-结算</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/zc.css"> <!-- 复用注册页表单样式，保证尺寸统一 -->
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="nav-bar">
        <div class="logo">遵义旅游售票网</div>
        <div class="nav-links">
            <a href="index.html">首页</a>
            <a href="ly.html">旅游分类</a>
            <a href="gwc.html">购物车</a>
            <a href="zc.html">注册</a>
        </div>
    </nav>

    <!-- 结算表单（恢复原始尺寸+布局） -->
    <div class="form-page">
        <h2>订单结算</h2>
        <form class="settle-form">
            <div class="form-item">
                <label>收货人：</label>
                <input type="text" id="receiver" placeholder="请输入收货人姓名">
                <div class="error-tip" id="receiverTip"></div>
            </div>
            <div class="form-item">
                <label>手机号：</label>
                <input type="tel" id="recvPhone" placeholder="请输入11位手机号">
                <div class="error-tip" id="phoneTip"></div>
            </div>
            <div class="form-item">
                <label>收货地址：</label>
                <input type="text" id="address" placeholder="请输入详细收货地址">
                <div class="error-tip" id="addressTip"></div>
            </div>
            <div class="form-btn-group">
                <button type="button" class="back-cart">返回购物车</button>
                <button type="reset" class="reset-btn">重置</button>
                <button type="button" class="submit-order">提交订单</button>
            </div>
        </form>
    </div>

    <!-- Toast提示组件 -->
    <div class="toast" id="toast"></div>

    <script src="js/common.js"></script>
    <script>
        // 结算页逻辑（恢复原始交互）
        const backCartBtn = document.querySelector('.back-cart');
        const submitOrderBtn = document.querySelector('.submit-order');
        const receiverInput = document.getElementById('receiver');
        const phoneInput = document.getElementById('recvPhone');
        const addressInput = document.getElementById('address');

        // 返回购物车
        backCartBtn.onclick = () => {
            location.href = 'gwc.html';
        };

        // 提交订单验证（恢复原始验证逻辑）
        submitOrderBtn.onclick = () => {
            let isOk = true;
            // 清空错误提示
            document.querySelectorAll('.error-tip').forEach(tip => tip.innerText = '');

            // 验证收货人
            if (!receiverInput.value.trim()) {
                document.getElementById('receiverTip').innerText = '收货人不能为空';
                isOk = false;
            }

            // 验证手机号
            if (!/^1[3-9]\d{9}$/.test(phoneInput.value.trim())) {
                document.getElementById('phoneTip').innerText = '请输入有效手机号';
                isOk = false;
            }

            // 验证地址
            if (!addressInput.value.trim()) {
                document.getElementById('addressTip').innerText = '收货地址不能为空';
                isOk = false;
            }

            // 提交订单
            if (isOk) {
                // 清空购物车
                localStorage.removeItem('cartList');
                showToast('订单提交成功！');
                setTimeout(() => {
                    location.href = 'gwc.html';
                }, 2000);
            }
        };
    </script>
</body>
</html>